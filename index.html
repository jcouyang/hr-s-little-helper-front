<!DOCTYPE html>
<html>
<head>
    <script src="scripts/js/jquery-1.11.3.js"></script>
    <script src="scripts/js/react.js"></script>
    <script src="scripts/js/JSXTransformer.js"></script>
    <link rel="stylesheet" href="./scripts/css/main.css">
</head>
<body>
<div id="interviewer-form"/>

<script type="text/jsx">
var Title =  React.createClass({
render:function(){
return (
<span className='title'>Create New Interviewer</span>
);
}});

var FormElement = React.createClass({
value:'',
handleInputChange: function(){
this.value = this.refs.value.getDOMNode().value
},
render: function(){
return (
  <div className='form-element'>
  <span className='lbl'>{this.props.lname}</span>
  <input type='text' id={this.props.id} onChange={this.handleInputChange} ref='value'></input>
  </div>
);
}
});
var InterviewerForm = React.createClass({
  handle_submit: function(){
  $.ajax({
      url: this.props.url,
      dataType: 'json',
      cache: false,
      method: 'POST',
      data:{'name':this.refs.name.value,'tel':this.refs.tel.value,'email':this.refs.email.value},
      success: function(data) {
        console.log('success');
        alert('Add interviewer success');
      }.bind(this),
      error: function(xhr, status, err) {
        console.error("create interviewer", status, err.toString());
      }.bind(this)
    });
  },

  render: function(){
  return (
  <div>
  <Title/>

  <div class='interviewer-form'>
  <FormElement lname='Name' id='name' ref='name'></FormElement>
  <FormElement lname='Email' id='email' ref='email'></FormElement>
  <FormElement lname='Tel.' id='tel' ref='tel'></FormElement>
  <hr/>
  <input type='button' value='Sumit' id='submit'  onClick={this.handle_submit}/>
  </div>
  </div>
  );
  }
});

React.render(<InterviewerForm url='http://localhost:9999/api/v1/interviewer'></InterviewerForm>,document.getElementById('interviewer-form'));

    </script>
</body>
</html>